<div class="p-4 md:p-8 max-w-7xl mx-auto space-y-8">
    <!-- Header Section -->
    <div class="flex flex-col lg:flex-row lg:items-end justify-between gap-6">
        <div>
            <h1 class="text-2xl md:text-3xl font-bold text-white tracking-tight mb-2">Reportes Técnicos</h1>
            <p class="text-slate-400 text-sm md:text-base">Gestión y monitoreo de checklists mensuales</p>
        </div>
        <div class="flex flex-col sm:flex-row gap-3">
            <button
                class="bg-slate-800 hover:bg-slate-700 text-white px-6 py-3 rounded-xl transition-all shadow-lg font-bold flex items-center justify-center gap-2 hover:scale-105 active:scale-95">
                <lucide-icon [name]="Printer" [size]="20"></lucide-icon> IMPRIMIR PLANILLA
            </button>
            <a routerLink="/checklists/new"
                class="bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-xl transition-all shadow-lg shadow-blue-600/20 font-bold flex items-center justify-center gap-2 hover:scale-105 active:scale-95 group">
                <lucide-icon [name]="Plus" [size]="20" class="group-hover:rotate-90 transition-transform"></lucide-icon>
                NUEVO REPORTE
            </a>
        </div>
    </div>

    <!-- Filters & Search -->
    <div
        class="bg-slate-900/50 backdrop-blur-sm p-4 rounded-2xl border border-slate-800 flex flex-col md:flex-row gap-4 items-center">
        <div class="relative flex-1 w-full">
            <lucide-icon [name]="Search" [size]="20"
                class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-500"></lucide-icon>
            <input type="text" placeholder="Buscar por estación, folio, aeropuerto o técnico..."
                [(ngModel)]="searchTerm"
                class="w-full bg-slate-950 border-slate-800 rounded-xl pl-10 pr-4 py-3 text-slate-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all" />
        </div>
        <div class="flex gap-2 w-full md:w-auto">
            <button
                class="px-4 py-3 bg-slate-950 border border-slate-800 rounded-xl text-slate-400 hover:text-white hover:border-slate-700 transition-colors flex items-center gap-2">
                <lucide-icon [name]="Filter" [size]="18"></lucide-icon>
                <span>Filtros</span>
            </button>
        </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="flex items-center justify-center min-h-[400px]">
        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"></div>
    </div>

    <!-- Content -->
    <div *ngIf="!loading">
        <div *ngIf="checklists.length === 0"
            class="bg-slate-900/50 rounded-3xl p-16 text-center border border-slate-800 border-dashed">
            <div
                class="bg-slate-800 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-xl shadow-black/20">
                <lucide-icon [name]="FileText" [size]="40" class="text-slate-500"></lucide-icon>
            </div>
            <h3 class="text-xl font-bold text-white mb-2">No hay reportes registrados</h3>
            <p class="text-slate-400 mb-8 max-w-md mx-auto">Comienza creando un nuevo checklist para registrar el estado
                de los equipos.</p>
            <a routerLink="/checklists/new" class="text-blue-400 font-bold hover:text-blue-300 hover:underline">Crear
                primer reporte</a>
        </div>

        <div *ngIf="checklists.length > 0"
            class="bg-slate-900 rounded-3xl border border-slate-800 shadow-xl overflow-hidden">
            <div class="overflow-x-auto">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr
                            class="bg-slate-950/50 border-b border-slate-800 text-xs uppercase text-slate-500 font-bold tracking-wider">
                            <th class="p-6 w-24 text-center">Estado</th>
                            <th class="p-6">Estación / Equipo</th>
                            <th className="p-6">Aeropuerto</th>
                            <th className="p-6">Técnico</th>
                            <th className="p-6">Fecha / Folio</th>
                            <th class="p-6 text-right">Acciones</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-800">
                        <tr *ngFor="let checklist of filteredChecklists"
                            class="transition-colors group hover:bg-slate-800/20">
                            <td class="p-6 text-center">
                                <div class="w-3 h-3 rounded-full mx-auto" [ngClass]="getStatusColor(checklist.estado)">
                                </div>
                            </td>
                            <td class="p-6">
                                <div class="font-bold text-white text-lg mb-1 uppercase">{{ checklist.estacion }}</div>
                                <div class="text-xs font-bold tracking-wider uppercase"
                                    [ngClass]="getStatusTextClass(checklist.estado)">
                                    {{ checklist.estado || 'SIN ESTADO' }}
                                </div>
                            </td>
                            <td class="p-6">
                                <div *ngIf="checklist.aeropuerto; else noAirport">
                                    <div class="font-semibold text-white">{{ checklist.aeropuerto.nombre }}</div>
                                    <div class="text-xs text-slate-500 font-mono">{{ checklist.aeropuerto.codigo || '-'
                                        }}</div>
                                    <div *ngIf="checklist.aeropuerto.fir" class="text-xs text-blue-400 mt-1">FIR: {{
                                        checklist.aeropuerto.fir.nombre }}</div>
                                </div>
                                <ng-template #noAirport><span class="text-slate-600 text-sm">Sin
                                        asignar</span></ng-template>
                            </td>
                            <td class="p-6">
                                <div *ngIf="checklist.tecnico; else noTecnico">
                                    <div class="font-semibold text-white">{{ checklist.tecnico.nombre }} {{
                                        checklist.tecnico.apellido }}</div>
                                    <div class="text-xs text-slate-500">{{ checklist.tecnico.puesto?.nombre || '-' }}
                                    </div>
                                </div>
                                <ng-template #noTecnico><span class="text-slate-600 text-sm">Sin
                                        asignar</span></ng-template>
                            </td>
                            <td class="p-6">
                                <div class="flex items-center gap-2 text-slate-300 mb-1">
                                    <lucide-icon [name]="Calendar" [size]="14" class="text-slate-500"></lucide-icon>
                                    <span class="font-mono">{{ checklist.fecha | date:'shortDate' }}</span>
                                </div>
                                <div class="flex items-center gap-2 text-slate-500 text-sm">
                                    <span class="text-xs uppercase font-bold tracking-wider">Folio</span>
                                    <span class="font-mono text-slate-400">#{{ checklist.folio || '---' }}</span>
                                </div>
                            </td>
                            <td class="p-6 text-right">
                                <div
                                    class="flex items-center justify-end gap-2 opacity-100 lg:opacity-0 lg:group-hover:opacity-100 transition-opacity duration-300">
                                    <a [routerLink]="['/checklists', checklist.id]"
                                        class="p-2.5 bg-slate-800 text-slate-400 hover:text-white hover:bg-blue-600 rounded-xl transition-all shadow-lg"
                                        title="Ver Detalles">
                                        <lucide-icon [name]="ChevronRight" [size]="20"></lucide-icon>
                                    </a>
                                    <a [routerLink]="['/checklists', checklist.id, 'edit']"
                                        class="p-2.5 bg-slate-800 text-slate-400 hover:text-white hover:bg-amber-600 rounded-xl transition-all shadow-lg"
                                        title="Editar">
                                        <lucide-icon [name]="Edit" [size]="18"></lucide-icon>
                                    </a>
                                    <button (click)="handleDelete(checklist.id)"
                                        class="p-2.5 bg-slate-800 text-slate-400 hover:text-white hover:bg-red-600 rounded-xl transition-all shadow-lg"
                                        title="Eliminar">
                                        <lucide-icon [name]="Trash2" [size]="18"></lucide-icon>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>